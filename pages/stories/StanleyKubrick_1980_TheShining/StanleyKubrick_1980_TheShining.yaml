- step_01_extract_screenplay:
    - "use PyPDF2 python script to read StanleyKubrick_1980_TheShining.pdf"
    - "write raw text to StanleyKubrick_1980_TheShining.txt"
    - "verify the screenplay text is complete and searchable (test with grep)"
    - "note the total number of pages and approximate runtime"
    - "result: 148 pages extracted to 8,756 lines of text"

- step_02_scene_extraction:
    - "study pages/stories/NeilBurger_2011_Limitless/limitless_scenes.json as template"
    - "USE AGENT (general-purpose or Explore) to systematically extract scenes"
    - "determine natural scene breaks based on DRAMATIC BEATS, not camera directions"
    - "target 30-40 narrative scenes (The Shining: 33 scenes from 231 camera setups)"
    - "count total scenes - verify against screenplay (NEVER pad with fake scenes!)"
    - "create shining_scenes.json with metadata section:"
    - "  - title, director, writer, year, runtime, genre, themes[], totalScenes, analysisDate"
    - "for each scene, extract from StanleyKubrick_1980_TheShining.txt:"
    - "  - id (sequential, starting at 1)"
    - "  - act (use 'TBD' for now - will assign in step_04)"
    - "  - title (concise, descriptive)"
    - "  - location (primary + description)"
    - "  - time (runtime timestamp + narrative description)"
    - "  - plotSummary (brief, detailed, subtext)"
    - "  - keyDialogue (array of {quote, speaker, significance, context})"
    - "  - characterDevelopment (Jack, Wendy, Danny with state + arc)"
    - "  - psychologicalState (Jack's mental state: stable/deteriorating/psychotic)"
    - "  - tensionLevel (1-10 scale)"
    - "  - significance (why this scene matters to the story)"
    - "  - foreshadowing (empty array [] for now - will populate in step_04)"
    - "  - tags (supernatural, family, isolation, madness, violence, symbolism, etc.)"

- step_03_data_validation:
    - "verify JSON is valid (python json.load() test)"
    - "verify ALL scene IDs are sequential 1 to N with no gaps"
    - "verify metadata.totalScenes matches len(scenes)"
    - "FIX any JSON syntax errors (common: closing } instead of ] in arrays)"
    - "verify character development tracks progression across all scenes"
    - "verify psychological state progression is logical (stable ‚Üí deteriorating ‚Üí psychotic)"
    - "count psychological states distribution (The Shining: stable=10, deteriorating=7, psychotic=16)"
    - "cross-reference key dialogue against screenplay text"
    - "ensure no fabricated content - everything must match screenplay"
    - "NOTE: foreshadowing will be empty at this stage - that's correct"

- step_04_act_structure_and_foreshadowing:
    - "determine natural three-act structure based on dramatic turning points:"
    - "  Act I: Setup and arrival at Overlook Hotel (scenes 1-9)"
    - "  Act II: Isolation and Jack's deterioration (scenes 10-26)"
    - "  Act III: Final confrontation and escape (scenes 27-33)"
    - "USE PYTHON to programmatically assign 'act' field: replace all 'TBD' with act1/act2/act3"
    - "verify act distribution feels balanced (The Shining: 9/17/7 - Act II longest)"
    - "choose act emojis that fit themes (The Shining: üèîÔ∏è arrival, üî• deterioration, ‚ùÑÔ∏è frozen)"
    - "choose act colors that match mood (The Shining: #4A90E2 blue, #D32F2F red, #212121 black)"
    - "ADD FORESHADOWING CONNECTIONS (now that acts are assigned):"
    - "  - use Python to add foreshadowing arrays to key scenes"
    - "  - create narrative web of connections (The Shining: 49 total connections)"
    - "  - verify ALL foreshadowing references point to valid scene IDs"
    - "  - example: scene 2 (Grady story) ‚Üí [8, 23, 25, 29] (confrontations, violence)"
    - "do NOT create redundant callbacks arrays (auto-generated from foreshadowing)"

- step_05_discussion_questions:
    - "create 15-20 thought-provoking discussion questions IN JAVASCRIPT"
    - "define DISCUSSION_QUESTIONS constant in shining_timeline.js"
    - "each question needs: {id, question, tags[], relatedScenes[]}"
    - "EXTRACT ALL UNIQUE TAGS used across all questions (The Shining: 32 tags)"
    - "ORGANIZE tags into 5-6 logical groups for display:"
    - "  - Core Themes (supernatural, psychology, interpretation, symbolism, identity)"
    - "  - Characters (jack, wendy, danny, family, children)"
    - "  - Horror Elements (madness, violence, abuse, evil, isolation, addiction)"
    - "  - Kubrick's Vision (kubrick, cinematography, visual, adaptation, history)"
    - "  - Key Symbols (hotel, maze, room-237, photograph, time, prophecy, environment)"
    - "  - Character Traits (psychic, survival, intelligence, escape)"
    - "question types to include:"
    - "  - Character psychology and motivation"
    - "  - Supernatural vs psychological interpretation"
    - "  - Symbolism and themes"
    - "  - Cinematography and visual storytelling"
    - "  - Family dynamics and isolation"
    - "  - Director's choices and adaptations"

- step_06_html_page:
    - "study pages/stories/NeilBurger_2011_Limitless/limitless.html"
    - "create shining.html based on Limitless template"
    - "use css/movie_timelines.css as base stylesheet"
    - "link to shining_custom.css?v=YYYY.MM.DD.HH.MM.SS"
    - "CRITICAL: Use placeholders for header/footer:"
    - "  - <div id='header_placeholder'></div>"
    - "  - <div id='footer_placeholder'></div> (NOT hardcoded footer)"
    - "CRITICAL: Add loadHeaderFooter script at END:"
    - "  <script>"
    - "    loadHeaderFooter('../../../automation/header.html', '../../../automation/footer.html');"
    - "  </script>"
    - "include sections:"
    - "  - Film overview with metadata"
    - "  - How to use the visualization (hover, click, Escape behavior)"
    - "  - Color legend for acts"
    - "  - Psychological state legend (or cognitive for other films)"
    - "  - Connection lines legend (foreshadowing/callbacks)"
    - "  - Key recurring themes section"
    - "  - Discussion questions section with:"
    - "    - <div id='questions-container'> (JS will populate this)"
    - "    - Sort toggle buttons (Film Order / Theme)"
    - "use timestamp versioning: ?v=YYYY.MM.DD.HH.MM.SS"

- step_07_visualization_js:
    - "study pages/stories/NeilBurger_2011_Limitless/limitless_timeline.js"
    - "create shining_timeline.js adapting from Limitless:"
    - "CRITICAL ADAPTATIONS:"
    - "  - CONFIG.DATA_FILE: 'shining_scenes.json'"
    - "  - cognitiveState ‚Üí psychologicalState everywhere"
    - "  - PSYCHOLOGICAL_COLORS: {stable, deteriorating, psychotic} not cognitive colors"
    - "  - ACT_COLORS: theme-appropriate (blue/red/black for The Shining)"
    - "  - ACT_ICONS: theme-appropriate (üèîÔ∏èüî•‚ùÑÔ∏è for The Shining)"
    - "  - Remove MDT tracking code (only relevant to Limitless)"
    - "INCLUDE from Limitless:"
    - "  - circular radial tree layout (D3.js)"
    - "  - connection logic: auto-generate callbacks from foreshadowing"
    - "  - for each foreshadowing A‚ÜíB, create:"
    - "    1. Foreshadowing link: A ‚Üí B (solid blue)"
    - "    2. Callback link: B ‚Üí A (dashed purple)"
    - "  - hover behavior: show tooltip when no node locked"
    - "  - click behavior: lock node, hide tooltip, show info card"
    - "  - Escape key: clear all selections and unlock"
    - "  - progressive disclosure: track viewed scenes in localStorage"
    - "  - act filtering with scene counts"
    - "  - psychological state filtering"
    - "  - search functionality with / keyboard shortcut"
    - "  - info card modal (side panel slide-in)"
    - "  - hideInfoCard, showInfoCard, toggleViewedFromCard functions"
    - "CRITICAL: IMPLEMENT renderDiscussionQuestions() function:"
    - "  - called from initialize() after loadProgress()"
    - "  - dynamically generate question cards from DISCUSSION_QUESTIONS array"
    - "  - for EACH question, show ALL tags in organized groups"
    - "  - mark tags as 'active' (in color) or 'inactive' (grayscale)"
    - "  - create tag groups structure with labels"
    - "  - add onclick handlers: highlightBookClubScenes(this, event)"
    - "  - add 'Show Answer' button with toggleAnswer(event, this)"
    - "use timestamp versioning: ?v=YYYY.MM.DD.HH.MM.SS"

- step_08_custom_css_critical_fixes:
    - "create shining_custom.css with CRITICAL FIXES AT TOP:"
    - "SECTION 1: INFO CARD MODAL FIX (MUST BE FIRST - critical override)"
    - "  .info-card-backdrop.active { opacity: 1; pointer-events: auto; }"
    - "  .info-card.active { opacity: 1; pointer-events: auto; }"
    - "  .info-card-modal {"
    - "    position: fixed; top: 0; right: 0;"
    - "    transform: translateX(100%);"
    - "    width: 400px; height: 100vh;"
    - "    transition: transform 0.3s ease, opacity 0.3s ease;"
    - "  }"
    - "  .info-card-modal.active {"
    - "    transform: translateX(0); opacity: 1; pointer-events: auto;"
    - "  }"
    - "  .info-card-backdrop { pointer-events: none !important; }"
    - "  #visualization-container, .visualization-main { overflow: visible; }"
    - "SECTION 2: COLOR VARIABLES"
    - "  --act1-color, --act2-color, --act3-color (theme appropriate)"
    - "  --stable-color, --deteriorating-color, --psychotic-color"
    - "  --overlook-gold, --snow-white, --blood-red (film-specific)"
    - "SECTION 3: PSYCHOLOGICAL STATE STYLING"
    - "  .psychological-state-badge.stable/deteriorating/psychotic"
    - "  node styling based on states"
    - "SECTION 4: BOOK CLUB GRID OVERRIDE"
    - "  .book-club-grid {"
    - "    display: grid;"
    - "    grid-template-columns: repeat(2, 1fr) !important;"
    - "    gap: 1rem;"
    - "  }"
    - "SECTION 5: TAG COLOR DEFINITIONS (END OF FILE)"
    - "  Define .tag-{name} for EVERY tag used (32 for The Shining)"
    - "  Pattern:"
    - "    .tag-supernatural {"
    - "      background: rgba(156, 39, 176, 0.1);"
    - "      color: #9C27B0;"
    - "      border-color: #9C27B0;"
    - "    }"
    - "  Use theme-appropriate color palette (horror colors for The Shining)"
    - "ADDITIONAL ENHANCEMENTS (optional):"
    - "  - Tension level indicators"
    - "  - Motif-specific styling (twins, maze, room-237)"
    - "  - Custom scrollbars"
    - "  - Symmetrical layouts (Kubrick aesthetic)"

- step_09_final_verification:
    - "CRITICAL VISUAL TESTS:"
    - "  ‚úì Header and footer load properly (not blank)"
    - "  ‚úì Info card slides in from RIGHT as side panel (not bottom of page)"
    - "  ‚úì Discussion questions appear in 2-column grid (not 5-6 columns)"
    - "  ‚úì ALL tags visible in each question with active/inactive states"
    - "  ‚úì Tag colors display correctly (not gray boxes)"
    - "INTERACTION TESTS:"
    - "  ‚úì Hover shows tooltip when no node is locked"
    - "  ‚úì Click locks node, hides tooltip, shows info card"
    - "  ‚úì Escape key clears selections and unlocks node"
    - "  ‚úì Click outside clears selections"
    - "  ‚úì Search works (press / to focus)"
    - "  ‚úì Act filtering works with correct scene counts"
    - "  ‚úì State filtering works (stable/deteriorating/psychotic)"
    - "  ‚úì Discussion questions highlight correct scenes when clicked"
    - "  ‚úì 'Show Answer' toggles work"
    - "DATA INTEGRITY TESTS:"
    - "  ‚úì All foreshadowing connections visualize correctly"
    - "  ‚úì No broken scene references (console errors)"
    - "  ‚úì All scene IDs are valid"
    - "  ‚úì Progress tracking persists in localStorage"
    - "RESPONSIVE DESIGN:"
    - "  ‚úì Mobile: questions become 1 column"
    - "  ‚úì Mobile: info card adjusts width"
    - "  ‚úì Check on different screen sizes"
    - "VERSION CONSISTENCY:"
    - "  ‚úì Same timestamp across HTML CSS and JS links"

- step_10_commit:
    - "commit with descriptive message following Limitless patterns"
    - "include Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"
    - "verify git status is clean (no temp files)"

# ============================================
# KEY PRINCIPLES (from Limitless + The Shining)
# ============================================
# - NEVER pad scenes - only use scenes that actually exist in screenplay
# - Use only foreshadowing arrays (callbacks auto-generated by visualization)
# - All references must point to valid scene IDs
# - Character development must track throughout entire film
# - Verify everything against source screenplay - no fabricated content
# - Timestamp versioning for cache busting
# - Single source of truth for narrative connections
# - Use agents for complex extraction/analysis tasks
# - Programmatic data manipulation (Python) > manual editing
# - Critical CSS fixes go at TOP of custom stylesheet
# - renderDiscussionQuestions() must show ALL tags with active/inactive states
# - Test visual appearance AND interaction behavior

# My original outline for The Shining based on Limitless:
#- step_01:
#    - "read StanleyKubrick_1980_TheShining.pdf"
#    - "write raw to StanleyKubrick_1980_TheShining.txt"
#- step_02:
#    - "study pages/stories/NeilBurger_2011_Limitless/limitless_scenes.json"
#    - "determine the number of scenes that fit this movie"
#    - "fix the number of scenes and keep always going back to the StanleyKubrick_1980_TheShining.txt for reference"
#    - "extract scenes from StanleyKubrick_1980_TheShining.txt using
#    -limitless_scenes.json as a template"
#- step_03:
#    - "study pages/stores/NeilBurger_2011_Limitless/limitless.html"
#    - "use css/movie_timelines.css as the base css for StanleyKubrick_1980_TheShining.html"
#    - "add any more css needed to StanleyKubrick_1980_TheShining.css"
#- step_04:
#    - "study pages/stories/NeilBurger_2011_Limitless/limitless_timeline.js"
#    - "create StanleyKubrick_1980_TheShining.js to visualize the scenes extracted in -step_02"
#    - "Include any additional javascript needed for -StanleyKubrick_1980_TheShining.html"
#- step_05:
#      "In addition to the templates, use creative spins to make StanleyKubrick_1980_TheShining.html unique and interesting"